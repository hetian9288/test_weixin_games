<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>工厂方法模式-《JavaScript设计模式》</title>
</head>
<body>
	<p>工厂方法模式通过对产品的抽象使其创建业务主要负责用于创建多类产品的实例</p>
</body>
<script type="text/javascript">
	(function(){
		//安全模式，避免忘记写new报错
		var Demo=function(){
			if(!this instanceof Demo){
				return new Demo();
			}
		}
		// 安全的工厂方法
		//安全模式创建工厂类
		var Factory=function(type,content){
			if(this instanceof Factory){
				var s=new this[type](content);
				return s;
			}else{
				return new Factory(type,content);
			}
		};
		//工厂原型中设置创建所有类型数据对象的基类
		Factory.prototype =  {
			Java:function(content){
				this.content='java:'+content;
			},
			JavaScript:function(content){
				this.content='javascript:'+content;
			},
			UI:function(content){
				this.content='ui:'+content;
			},
			php:function(content){
				this.content='php:'+content;
			}
		};
		var javaObj=Factory('Java','aaa');
		console.log(javaObj);
		/*实际上是把每个方法作为构造函数实例化了一下。对于创建多类对象，前面学习的简单工厂模式就不适用了，这就是简单工厂模式的局限，当然这正是工厂方法模式的价值所在，通过工厂方法模式我们可以轻松地创建多个类的实例对象，这样工厂方法对象在创建对象的方式也避免了使用者与对象类之间的耦合，用户不必关心创建该对象的具体类，只需要调用工厂模式即可。*/
	})();
</script>
</html>






